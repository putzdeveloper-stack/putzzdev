<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Login + Game Ticket</title>
<style>
/* ---- tampilan ---- */
body {
  margin: 0;
  background: #0d0d0d;
  font-family: Arial;
  color: white;
}

.center {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.box {
  background: #1a1a1a;
  padding: 30px;
  width: 320px;
  text-align: center;
  border-radius: 15px;
  box-shadow: 0 0 20px cyan;
}

input, button, select {
  width: 90%;
  padding: 10px;
  border: none;
  border-radius: 10px;
  margin-top: 10px;
}

button {
  background: cyan;
  color: black;
  cursor: pointer;
}

#msg {
  margin-top: 10px;
  color: red;
}

/* Game Section */
#game {
  display: none;
  text-align: center;
  padding-top: 40px;
}

.ticket-btn {
  padding: 15px;
  background: cyan;
  color: black;
  border-radius: 10px;
  cursor: pointer;
  margin: 10px;
  width: 150px;
}

.score {
  font-size: 20px;
  margin: 10px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginPage" class="center">
  <div class="box">
    <h2>Login</h2>

    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button onclick="login()">Masuk</button>

    <p id="msg"></p>
  </div>
</div>

<!-- GAME -->
<div id="game">
  <h1>ðŸŽŸ Game Ticket</h1>

  <p>Pilih Mode:</p>
  <select id="mode">
    <option value="1p">1 Player vs AI</option>
    <option value="2p">2 Player</option>
  </select>

  <div style="margin-top:20px;">
    <button class="ticket-btn" onclick="pick('A')">Ticket A</button>
    <button class="ticket-btn" onclick="pick('B')">Ticket B</button>
  </div>

  <h2 id="result"></h2>

  <p class="score">Player 1: <span id="p1">0</span></p>
  <p class="score">Player 2 / AI: <span id="p2">0</span></p>
</div>

<script>
// ---- LOGIN ----
async function login() {
  let u = document.getElementById("user").value;
  let p = document.getElementById("pass").value;
  let msg = document.getElementById("msg");

  // FIXED â€” URL RAW KAMU YANG BENAR
  let data = await fetch("https://raw.githubusercontent.com/putzdeveloper-stack/putzzdev/refs/heads/main/password.json")
                    .then(x => x.json())
                    .catch(() => { msg.innerText = "Gagal ambil data!"; });

  if (!data) return;

  if (u === data.username && p === data.password) {
    msg.style.color = "lime";
    msg.innerText = "Login berhasil...";
    setTimeout(() => {
      document.getElementById("loginPage").style.display = "none";
      document.getElementById("game").style.display = "block";
    }, 700);
  } else {
    msg.innerText = "Username atau password salah!";
  }
}

// ---- GAME SYSTEM ----
let p1Score = 0;
let p2Score = 0;

function pick(choice) {
  let mode = document.getElementById("mode").value;

  if (mode === "1p") {
    playAI(choice);
  } else {
    play2P(choice);
  }
}

let turn = 1; // 1 = player1, 2 = player2 

function play2P(choice) {
  if (turn === 1) {
    p1 = choice;
    turn = 2;
    document.getElementById("result").innerHTML = "Player 2 pilih sekarang...";
  } else {
    p2 = choice;
    turn = 1;

    if (p1 === p2) {
      document.getElementById("result").innerHTML = "Seri!";
    } else {
      p1Score++;
      document.getElementById("result").innerHTML = "Player 1 Menang!";
    }

    updateScore();
  }
}

function playAI(choice) {
  let ai = Math.random() < 0.5 ? "A" : "B";

  if (choice === ai) {
    document.getElementById("result").innerHTML = "Seri!";
  } else {
    p1Score++;
    document.getElementById("result").innerHTML =
      "Kamu pilih " + choice + "<br>AI pilih " + ai + "<br><b>Kamu Menang!</b>";
  }

  updateScore();
}

function updateScore() {
  document.getElementById("p1").innerText = p1Score;
  document.getElementById("p2").innerText = p2Score;
}
</script>

</body>
</html>